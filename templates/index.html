<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>VORTEX AERO â€” Floating HySpexBot</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  /* -------------------------
     THEME COLORS & UTILS
     ------------------------- */
  :root{
    --bg-1:#030617;
    --bg-2:#051826;
    --panel:#071833;
    --muted:#9fdff6;
    --accent:#39d6ff;
    --accent-2:#6ef1b1;
    --accent-3:#8a6bff;
    --glass: rgba(255,255,255,0.04);
    --glass-2: rgba(255,255,255,0.02);
    --text:#e9fbff;
    --success:#6ef1b1;
    --danger:#ff6b6b;
    --shadow: 0 12px 40px rgba(0,0,0,0.6);
    --maxw:1200px;
  }
  /* Light theme variables (toggled) */
  .light {
    --bg-1:#f7fbff;
    --bg-2:#e9f3ff;
    --panel:rgba(255,255,255,0.9);
    --glass: rgba(1,1,1,0.03);
    --glass-2: rgba(1,1,1,0.02);
    --text:#051424;
    --shadow: 0 12px 40px rgba(5,10,20,0.06);
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: radial-gradient(900px 500px at 10% 10%, rgba(3,20,40,0.6), transparent 10%), linear-gradient(180deg,var(--bg-1),var(--bg-2));
    color:var(--text);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    overflow-y:scroll;
  }

  /* -------------------------
     BOOT SCREEN (3-5s dramatic)
     ------------------------- */
  #boot {
    position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,rgba(2,10,25,0.95),rgba(3,14,30,0.9));
    color:var(--text);flex-direction:column;gap:18px;
  }
  #boot .ring{width:160px;height:160px;border-radius:50%;border:2px solid rgba(57,214,255,0.08);display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 10px 60px rgba(57,214,255,0.06)}
  #boot .ring::after{content:'';position:absolute;width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 16px var(--accent)}
  #boot h1{font-family:'Orbitron',sans-serif;font-size:28px;letter-spacing:0.18em;color:var(--accent);text-shadow:0 8px 32px rgba(57,214,255,0.06)}
  #boot p{opacity:.9;color:rgba(255,255,255,0.7)}
  #boot .progress{width:360px;height:8px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden}
  #boot .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%;border-radius:8px;box-shadow:0 6px 26px rgba(57,214,255,0.08)}
  /* subtle flicker */
  @keyframes flick {0%{opacity:1}50%{opacity:0.85}100%{opacity:1}}

  /* -------------------------
     HEADER & NAV
     ------------------------- */
  header{position:fixed;top:18px;left:24px;right:24px;display:flex;justify-content:space-between;align-items:center;z-index:200}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{
    width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;
    background:conic-gradient(from 140deg,var(--accent),var(--accent-2),var(--accent-3));box-shadow:0 8px 28px rgba(57,214,255,0.06);
    border:1px solid rgba(255,255,255,0.06)
  }
  .brand h1{font-family:'Orbitron',sans-serif;font-size:18px;color:var(--accent);margin:0}
  nav{display:flex;gap:12px;align-items:center}
  nav a{color:var(--text);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:600}
  nav a:hover{background:var(--glass)}
  .controls{display:flex;gap:8px;align-items:center}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#022; border:none;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer;box-shadow:var(--shadow)}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:var(--text);cursor:pointer}

  /* -------------------------
    HERO / VORTEX ANIMATION
     ------------------------- */
  .hero{
    min-height:84vh;padding-top:80px;display:flex;align-items:center;justify-content:center;
    position:relative;overflow:visible;margin-bottom:20px;
  }
  .hero-inner{max-width:var(--maxw);width:100%;display:grid;grid-template-columns:1fr 480px;gap:28px;align-items:center;padding:48px}
  .hero-card{padding:28px;border-radius:18px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:var(--shadow);border:1px solid rgba(255,255,255,0.03)}
  .hero h2{font-family:'Orbitron',sans-serif;font-size:44px;margin:0 0 8px;color:var(--accent)}
  .hero p.lead{color:rgba(255,255,255,0.9);font-size:1.02rem;margin-bottom:12px}
  .hero .meta{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .pill{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.03);font-weight:600;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}

  /* vortex canvas placeholder */
  .vortex-stage{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative}
  #vortexCanvas{width:420px;height:420px;border-radius:18px;background:linear-gradient(180deg,rgba(2,18,30,0.6),rgba(3,14,22,0.3));box-shadow:0 18px 80px rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.03);overflow:hidden;display:block}
  .vortex-label{position:absolute;bottom:18px;left:20px;color:var(--accent);font-family:'Orbitron';letter-spacing:0.08em}

  /* letter animation container */
  .vortex-title-wrap{display:flex;gap:6px;align-items:center;justify-content:center;flex-wrap:wrap}
  .v-letter{
    font-family:'Orbitron';font-size:42px;color:transparent;-webkit-text-stroke:1px rgba(57,214,255,0.9);text-shadow:0 6px 26px rgba(57,214,255,0.06);
    display:inline-block;padding:6px;border-radius:6px;backdrop-filter:blur(6px);
    transform-origin:center;
  }
  .subtitle{color:rgba(255,255,255,0.8);margin-top:8px}

  /* -------------------------
     CONTENT SECTIONS
     ------------------------- */
  main{padding:40px 28px 80px;max-width:var(--maxw);margin:0 auto;min-height:40vh}
  .section{margin:26px 0;padding:20px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.03)}
  .section h3{font-family:'Orbitron';color:var(--accent);margin:0 0 10px}
  .muted{color:rgba(255,255,255,0.75)}
  .two-col{display:grid;grid-template-columns:1fr 360px;gap:18px;align-items:start}
  .card{padding:14px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.015),transparent);border:1px solid rgba(255,255,255,0.02)}
  .list{list-style:none;padding-left:0}
  .list li{padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}

  /* accordions */
  .accordion .acc-btn{width:100%;text-align:left;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);font-weight:700;cursor:pointer;margin-top:8px}
  .acc-body{padding:12px;margin-top:8px;border-radius:10px;background:rgba(255,255,255,0.01);display:none;color:rgba(255,255,255,0.95);line-height:1.5}

  /* downloads area */
  .downloads{display:flex;gap:12px;flex-wrap:wrap}
  .asset{padding:10px 12px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);display:flex;gap:10px;align-items:center}

  /* floating particles (background) */
  .particles{position:fixed;inset:0;z-index:0;pointer-events:none}
  .particle{position:absolute;border-radius:50%;opacity:0.12;filter:blur(6px)}

  /* footer */
  footer{padding:24px;text-align:center;color:rgba(255,255,255,0.7)}

  /* responsiveness */
  @media (max-width:1100px){
    .hero-inner{grid-template-columns:1fr;gap:20px}
    .two-col{grid-template-columns:1fr}
  }

  /* tiny helpers */
  .code{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;background:rgba(0,0,0,0.2);padding:6px;border-radius:6px;color:var(--accent-2)}
  .muted-small{color:rgba(255,255,255,0.6);font-size:0.92rem}
</style>
</head>
<body>

  <!-- BOOT SCREEN -->
  <div id="boot" role="dialog" aria-label="Boot screen">
    <div class="ring" id="bootRing"></div>
    <h1>VORTEX AERO â€” initializing</h1>
    <p>Edge AI Â· Hyperspectral Â· Acoustic Fusion Â· Live Telemetry</p>
    <div class="progress"><i id="bootBar"></i></div>
  </div>

  <!-- Header -->
  <header>
    <div class="brand">
      <div class="logo" aria-hidden>
        <svg viewBox="0 0 48 48" width="36" height="36" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs><linearGradient id="lg" x1="0" x2="1"><stop offset="0" stop-color="#39d6ff"/><stop offset="1" stop-color="#4bf1a6"/></linearGradient></defs>
          <rect x="4" y="4" width="40" height="40" rx="8" fill="url(#lg)"/>
          <circle cx="24" cy="20" r="6" fill="#02121a" opacity="0.85"/>
        </svg>
      </div>
      <div>
        <h1>VORTEX AERO</h1>
        <div class="muted-small">AI for a Sustainable Blue Planet</div>
      </div>
    </div>

    <nav>
      <a href="#overview">Overview</a>
      <a href="#tech">Technical</a>
      <a href="#ml">ML & Data</a>
      <a href="#business">Business</a>
      <a href="#contact" class="ghost">Contact</a>
      <div style="width:8px"></div>
      <button id="themeToggle" class="ghost" title="Toggle Light/Dark">ðŸŒ—</button>
    </nav>
  </header>

  <!-- floating particles -->
  <div class="particles" id="particles"></div>

  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="hero-inner">
      <div class="hero-card">
        <h2>VORTEX AERO â€” Floating HySpexBot</h2>
        <p class="lead">A modular, solar-assisted, Jetson Nano powered autonomous float that performs hyperspectral and acoustic sensing to detect chlorophyll (algal blooms) and floating plastics in real time. Designed for rivers, estuaries, and coastal nearshore zones.</p>
        <div class="meta">
          <div class="pill">Edge AI</div>
          <div class="pill">Hyperspectral 400â€“1000 nm</div>
          <div class="pill">Acoustic fusion</div>
          <div class="pill">MQTT Telemetry</div>
        </div>

        <div style="margin-top:18px;display:flex;gap:12px">
          <button class="btn" onclick="document.querySelector('#overview').scrollIntoView({behavior:'smooth'})">Explore</button>
          <button class="ghost" onclick="downloadBrief()">Download Brief</button>
        </div>

        <div style="margin-top:18px" class="muted-small">Prototype estimate: <span class="code">â‚¹40kâ€“â‚¹80k</span> â€” scalable for fleets.</div>
      </div>

      <div class="vortex-stage">
        <canvas id="vortexCanvas" width="420" height="420" aria-hidden></canvas>
        <div class="vortex-label">VORTEX AERO</div>
      </div>
    </div>
  </section>

  <!-- MAIN CONTENT -->
  <main>

    <!-- OVERVIEW -->
    <section id="overview" class="section">
      <h3>Abstract & Overview</h3>
      <p class="muted">VORTEX AERO is an edge-first environmental monitoring platform that combines hyperspectral reflectance (400â€“1000 nm) with short-range acoustic sensing and AI on NVIDIA Jetson hardware. It estimates chlorophyll-a concentration, maps turbidity, and detects/classifies floating plastics using a fusion model that is robust to turbidity and cloud cover.</p>

      <div class="two-col" style="margin-top:14px">
        <div>
          <h4 style="margin:6px 0">Objectives</h4>
          <ul class="list">
            <li>Design a compact, stable floating platform for nearshore waters.</li>
            <li>Integrate hyperspectral + acoustic sensors with Jetson Nano edge processing.</li>
            <li>Develop ML algorithms for chlorophyll estimation and plastic classification.</li>
            <li>Implement telemetry, cloud visualization and alerting.</li>
            <li>Create open-source datasets and operational SOPs.</li>
          </ul>

          <h4 style="margin:12px 0 6px">Applications</h4>
          <ul class="list">
            <li>Water quality monitoring for governments and research</li>
            <li>Plastic hotspot mapping & cleanup prioritization</li>
            <li>Calibration/validation of satellite ocean color products</li>
            <li>Aquaculture monitoring and compliance</li>
          </ul>
        </div>

        <aside>
          <div class="card">
            <strong>Expected Outcomes</strong>
            <ul class="list" style="margin-top:8px">
              <li>Working prototype for field tests</li>
              <li>Real-time chlorophyll and plastic detection maps</li>
              <li>Open dataset of spectral signatures</li>
              <li>Dockerized Jetson runtime & synthetic data generator</li>
            </ul>
          </div>

          <div style="height:12px"></div>

          <div class="card">
            <strong>Quick Links</strong>
            <div style="margin-top:10px" class="downloads">
              <div class="asset"><button class="ghost" onclick="downloadSVG('flow')">â¬‡ Flowchart (SVG)</button></div>
              <div class="asset"><button class="ghost" onclick="downloadSVG('pcb')">â¬‡ PCB Wiring (SVG)</button></div>
              <div class="asset"><button class="ghost" onclick="downloadJSON()">â¬‡ Dataset Sample (JSON)</button></div>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- TECHNICAL -->
    <section id="tech" class="section">
      <h3>Technical Architecture</h3>
      <p class="muted">Modular stack: Sensors â†’ MCU preproc â†’ Jetson edge fusion â†’ Cloud. Data is published via MQTT; models are TensorRT-optimized for FP16/INT8 where possible.</p>

      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
        <div class="card" style="flex:1;min-width:260px">
          <strong>Hardware Summary</strong>
          <ul class="list" style="margin-top:10px">
            <li>Jetson Nano (4GB) or Xavier NX for higher throughput</li>
            <li>Hyperspectral spectrometer (400â€“1000 nm) â€” USB / UVC interface</li>
            <li>Acoustic transducer array + low-noise preamp + ADC</li>
            <li>u-blox GPS + IMU for geotagging & PPS</li>
            <li>LiFePO4 battery + MPPT solar charger</li>
          </ul>
        </div>

        <div class="card" style="flex:1;min-width:260px">
          <strong>Software & Edge Stack</strong>
          <ul class="list" style="margin-top:10px">
            <li>Docker image for Jetson with PyTorch & JetPack-compatible wheels</li>
            <li>Inference service (MQTT in/out), telemetry daemon, and local DB</li>
            <li>Model formats: TorchScript / ONNX â†’ TensorRT</li>
            <li>MCU firmware for acoustic ADC & feature extraction (STM32/ESP32)</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ML & DATA -->
    <section id="ml" class="section">
      <h3>ML Pipeline & Data</h3>
      <p class="muted">We use a two-branch fusion model: spectral branch (1D CNN / ResNet-1D) and acoustic branch (MLP). Fusion uses attention conditioned on turbidity and sun-angle. Training uses synthetic + field-labelled data; domain adaptation via small in-situ fine-tuning.</p>

      <div class="accordion" style="margin-top:14px">
        <button class="acc-btn" onclick="toggleAcc(this)">Data Sources & Ground-truth (patent-friendly)</button>
        <div class="acc-body">
          <strong>Patent-friendly wording:</strong> "A data acquisition procedure comprising capturing surface spectral reflectance across 400â€“1000 nm, recording concomitant acoustic echo signatures, and annotating samples with laboratory-derived chlorophyll-a concentrations and polymer identifications using FTIR for training and validation of a fusion classifier."
        </div>

        <button class="acc-btn" onclick="toggleAcc(this)">Model Design (patent-friendly)</button>
        <div class="acc-body">
          <strong>Patent-friendly wording:</strong> "A sensor-fusion inference method employing a spectral feature extractor and an acoustic feature extractor followed by an attention-based fusion block that outputs (i) a regression estimate for chlorophyll concentration and (ii) a classification label for floating polymer type."
        </div>

        <button class="acc-btn" onclick="toggleAcc(this)">Synthetic Data Generator</button>
        <div class="acc-body">
          The synthetic generator simulates spectra under varying turbidity and illumination, and produces acoustic features based on expected echo profiles. This accelerates initial model training and reduces field lab costs.
        </div>
      </div>
    </section>

    <!-- BUSINESS -->
    <section id="business" class="section">
      <h3>Business Model & Impact</h3>
      <p class="muted">We propose a hybrid revenue model: Data-as-a-Service (DaaS) subscriptions for analytics and alerts, Hardware-as-a-Service (HaaS) for fleet deployments, and calibration/consulting services for institutions and satellite providers.</p>

      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px">
        <div class="card"><strong>Stakeholders</strong><ul class="list"><li>Govt. water boards</li><li>Environmental NGOs</li><li>Research institutions</li><li>Aquaculture operators</li></ul></div>
        <div class="card"><strong>Revenue Streams</strong><ul class="list"><li>Subscription data access</li><li>Fleet leasing + maintenance</li><li>One-time hardware sales & training</li></ul></div>
        <div class="card"><strong>Social Impact</strong><ul class="list"><li>Faster response to algal blooms</li><li>Evidence-based cleanup prioritization</li><li>Accessible datasets for education</li></ul></div>
      </div>
    </section>

    <!-- JETSON DOCKER SUMMARY -->
    <section id="jetson" class="section">
      <h3>Jetson Docker Image â€” Quick Summary</h3>
      <p class="muted">Use a JetPack-compatible base image and install an L4T PyTorch wheel matching your JetPack version. The runtime includes: Python 3, PyTorch (L4T wheel), TorchVision (matching build), ONNX, TensorRT/TF TRTexec for conversion, OpenCV, paho-mqtt. Provide a model path and an inference service to subscribe to spectral and acoustic topics and publish detections.</p>

      <pre class="code">
// Build example (run on Jetson with wheel present):
docker build --build-arg PYTORCH_WHEEL=./torch-*.whl -t vorte-x:edge .
docker run --rm --gpus all --device=/dev/ttyUSB0 --network host -v /opt/hyspex:/app vorte-x:edge
      </pre>
    </section>

    <!-- TECHNICAL DEEP DIVE & FIRMWARE -->
    <section id="deep" class="section">
      <h3>Technical Deep-Dive & Firmware Pseudocode</h3>

      <div class="accordion">
        <button class="acc-btn" onclick="toggleAcc(this)">MCU Firmware â€” Acoustic ADC & Feature Extraction (patent-friendly)</button>
        <div class="acc-body">
          <strong>Patent-friendly wording:</strong> "An embedded method where acoustic transducers are excited, received echo signals are sampled via DMA-driven ADC, and per-ping features (peak amplitude, signal energy, width, spectral slope, kurtosis) are computed and transmitted to an edge processor for fusion."
        </div>

        <button class="acc-btn" onclick="toggleAcc(this)">Field Calibration Protocol</button>
        <div class="acc-body">
          Pre-deployment calibration uses a Spectralon white reference for reflectance calibration, dark current capture, and paired lab samples for chlorophyll-a via acetone extraction. Maintain calibration logs and timestamps for reproducibility.
        </div>

        <button class="acc-btn" onclick="toggleAcc(this)">Patent-safety Guidance</button>
        <div class="acc-body">
          For patent claims, target specific algorithms (e.g., turbidity-conditioned attention fusion), system timing methods, and distinct data-processing steps. Avoid claiming broad natural phenomena or general sensor use.
        </div>
      </div>
    </section>

    <!-- CONTACT & SNIPPETS -->
    <section id="contact" class="section">
      <h3>Contact & Deliverables</h3>
      <p class="muted">Request the full repository, Docker context, synthetic dataset, and PCB wiring. We provide deployment guides for Jetson devices and calibration checklists.</p>

      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
        <div style="flex:1;min-width:260px">
          <label style="display:block;margin-bottom:8px;font-weight:700">Generate a Text Snippet (AI-like response)</label>
          <div style="display:flex;gap:8px">
            <select id="snippetType" style="flex:1;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
              <option value="alert">Alert / Field</option>
              <option value="patent">Patent-friendly phrasing</option>
              <option value="summary">Executive summary (short)</option>
              <option value="deploy">Deployment checklist</option>
            </select>
            <button class="btn" onclick="makeSnippet()">Generate</button>
          </div>

          <div id="snippet" style="margin-top:12px;padding:12px;border-radius:8px;background:rgba(0,0,0,0.25);min-height:96px;color:var(--accent-2);font-family:monospace"></div>
        </div>

        <div style="flex:1;min-width:260px">
          <label style="display:block;margin-bottom:8px;font-weight:700">Request Files</label>
          <form onsubmit="event.preventDefault(); alert('Demo: request noted. We will share links upon real deployment.')">
            <input placeholder="Your name" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)"/>
            <input placeholder="Email" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);margin-top:8px"/>
            <div style="margin-top:8px;display:flex;gap:8px">
              <button class="btn" type="submit">Request</button>
              <button class="ghost" type="button" onclick="downloadAll()">Download All Assets</button>
            </div>
          </form>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div>Â© 2025 VORTEX AERO â€” AI for a Sustainable Blue Planet</div>
  </footer>

<script>
/* -------------------------
   BOOT SEQUENCE
   ------------------------- */
(function boot(){
  const bar = document.getElementById('bootBar');
  const ring = document.getElementById('bootRing');
  let pct = 0;
  const id = setInterval(()=>{
    pct += Math.random()*8 + 4;
    if(pct>=100){ pct=100; clearInterval(id); finishBoot() }
    bar.style.width = pct + '%';
    ring.style.transform = 'rotate(' + (pct*3.6) + 'deg)';
  }, 220);

  function finishBoot(){
    setTimeout(()=> {
      const boot = document.getElementById('boot');
      boot.style.transition = 'opacity 0.9s ease';
      boot.style.opacity = 0;
      setTimeout(()=> boot.style.display = 'none', 1000);
      // animate hero letters after boot finish
      startVortex();
      initParticles();
    }, 700);
  }
})();

/* -------------------------
   VORTEX ANIMATION (Canvas)
   - particle vortex with per-letter ripple
   ------------------------- */
const canvas = document.getElementById('vortexCanvas');
const ctx = canvas.getContext('2d');
let W = canvas.width, H = canvas.height;
let parts = [];
function rand(min,max){return Math.random()*(max-min)+min}

function startVortex(){
  // generate particles
  parts = [];
  const N = 72;
  for(let i=0;i<N;i++){
    const a = Math.random()*Math.PI*2;
    const r = rand(30,170);
    const size = rand(2,6);
    parts.push({
      a0:a, r0:r, size:size,
      speed:rand(0.0006,0.0025), phase:rand(0,Math.PI*2),
      hue: 190 + Math.random()*120
    });
  }
  // animate letters - create DOM letters
  createLetterElements();
  animate();
}

function animate(t){
  ctx.clearRect(0,0,W,H);
  const cx = W/2, cy = H/2;
  // draw soft radial background
  const g = ctx.createRadialGradient(cx,cy,10,cx,cy,240);
  g.addColorStop(0,'rgba(57,214,255,0.06)');
  g.addColorStop(0.4,'rgba(75,241,166,0.02)');
  g.addColorStop(1,'rgba(2,8,14,0)');
  ctx.fillStyle = g; ctx.fillRect(0,0,W,H);

  // draw orbiting particles
  parts.forEach((p,idx)=>{
    const time = (t||0);
    const theta = p.a0 + time * p.speed + Math.sin(time/1200 + p.phase)*0.08;
    const rad = p.r0 * (0.9 + 0.08*Math.sin(time/700 + idx));
    const x = cx + Math.cos(theta)*rad;
    const y = cy + Math.sin(theta)*(rad*0.6);
    const hue = p.hue;
    const size = p.size * (1 + 0.3*Math.sin(time/500 + idx));
    ctx.beginPath();
    ctx.fillStyle = 'hsla(' + hue + ',90%,60%,' + (0.55 + 0.4*Math.cos(time/900 + idx)) + ')';
    ctx.arc(x,y,size,0,Math.PI*2);
    ctx.fill();
    // subtle tail
    ctx.beginPath();
    ctx.strokeStyle = 'rgba(255,255,255,0.03)';
    ctx.moveTo(cx,cy);
    ctx.lineTo(x,y);
    ctx.stroke();
  });

  // central swirl
  for(let k=0;k<6;k++){
    ctx.beginPath();
    ctx.strokeStyle = 'rgba(57,214,255,' + (0.03 + 0.02*Math.sin((t||0)/800 + k)) + ')';
    ctx.lineWidth = 1.5;
    ctx.arc(cx,cy,26 + k*12, (t||0)/1400 + k, (t||0)/1400 + Math.PI*1.7);
    ctx.stroke();
  }

  requestAnimationFrame(animate);
}

window.addEventListener('resize', ()=>{ W = canvas.width = canvas.clientWidth; H = canvas.height = canvas.clientHeight; });

/* -------------------------
   LETTER ELEMENTS (DOM) - crazy per-letter physics/hover
   ------------------------- */
function createLetterElements(){
  const wrap = document.createElement('div');
  wrap.className = 'vortex-title-wrap';
  const heroStage = document.querySelector('.vortex-stage');
  // remove existing label and insert letters absolutely
  const label = document.querySelector('.vortex-label');
  label.style.display = 'none';

  const title = 'VORTEX AERO';
  const container = document.createElement('div');
  container.style.position = 'absolute';
  container.style.left = '50%';
  container.style.top = '50%';
  container.style.transform = 'translate(-50%,-8%)';
  container.style.display = 'flex';
  container.style.gap = '8px';
  container.style.zIndex = 4;
  heroStage.appendChild(container);

  for(let i=0;i<title.length;i++){
    const ch = title[i];
    const span = document.createElement('div');
    span.className = 'v-letter';
    span.textContent = ch;
    span.style.opacity = ch.trim() ? 0.98 : 0.25;
    container.appendChild(span);
    // animate using JS timeline (stagger)
    setTimeout(()=> {
      span.animate([
        { transform:'translateY(30px) rotate(-30deg) scale(.6)', opacity:0.0 },
        { transform:'translateY(0px) rotate(0deg) scale(1.0)', opacity:1.0 }
      ], { duration: 800, easing: 'cubic-bezier(.2,.9,.2,1)' });
    }, i*70);
    // hover effect
    span.onmouseenter = ()=> span.animate([
      { transform:'scale(1) rotate(0deg)'},
      { transform:'scale(1.45) rotate(12deg)'}
    ], { duration:400, fill:'forwards', easing:'ease-out' });
    span.onmouseleave = ()=> span.animate([
      { transform:'scale(1.45) rotate(12deg)'},
      { transform:'scale(1) rotate(0deg)'}
    ], { duration:350, fill:'forwards', easing:'ease-in' });
  }
}

/* -------------------------
   PARTICLES BACKGROUND
   ------------------------- */
function initParticles(){
  const root = document.getElementById('particles');
  const W = window.innerWidth;
  const H = window.innerHeight;
  const colors = ['rgba(57,214,255,0.08)','rgba(75,241,166,0.06)','rgba(138,107,255,0.06)'];
  for(let i=0;i<28;i++){
    const el = document.createElement('div');
    el.className='particle';
    const size = Math.random()*200 + 30;
    el.style.width = size + 'px';
    el.style.height = size + 'px';
    el.style.borderRadius = (size/2)+'px';
    el.style.left = Math.random()*W + 'px';
    el.style.top = Math.random()*H + 'px';
    el.style.background = colors[i%colors.length];
    el.style.transform = 'translate3d(0,0,0)';
    root.appendChild(el);
    // animate via FX
    (function(a){
      const dur = 16000 + Math.random()*24000;
      const dx = (Math.random()-0.5)*600;
      const dy = (Math.random()-0.5)*400;
      a.animate([{transform:'translate(0px,0px)'},{transform:`translate(${dx}px,${dy}px)`},{transform:'translate(0px,0px)'}], {duration:dur,iterations:Infinity,delay:Math.random()*-10000,easing:'ease-in-out'});
    })(el);
  }
}

/* -------------------------
   ACCORDION
   ------------------------- */
function toggleAcc(btn){
  const body = btn.nextElementSibling;
  if(!body) return;
  const shown = body.style.display === 'block';
  body.style.display = shown ? 'none' : 'block';
  btn.style.background = shown ? 'transparent' : 'linear-gradient(90deg,var(--accent),var(--accent-2))';
  btn.style.color = shown ? 'var(--muted)' : '#021';
}

/* -------------------------
   THEME TOGGLE
   ------------------------- */
const tgl = document.getElementById('themeToggle');
let theme = localStorage.getItem('vortex_theme') || 'dark';
if(theme==='light') document.documentElement.classList.add('light');
tgl.addEventListener('click', ()=>{
  document.documentElement.classList.toggle('light');
  theme = document.documentElement.classList.contains('light') ? 'light' : 'dark';
  localStorage.setItem('vortex_theme', theme);
});

/* -------------------------
   DOWNLOAD GENERATORS
   - Embeds SVG flowchart and PCB wiring files and downloads
   ------------------------- */
function downloadSVG(kind){
  let svg = '';
  if(kind==='flow'){
    svg = `<?xml version="1.0" encoding="UTF-8"?>
    <svg xmlns='http://www.w3.org/2000/svg' width='1000' height='360' viewBox='0 0 1000 360'>
      <defs><linearGradient id='g' x1='0' x2='1'><stop offset='0' stop-color='#39d6ff'/><stop offset='1' stop-color='#4bf1a6'/></linearGradient></defs>
      <rect x='10' y='30' width='280' height='140' rx='12' fill='#022033' stroke='rgba(255,255,255,0.04)'/>
      <text x='150' y='62' text-anchor='middle' fill='#9fe9ff' font-weight='700' font-size='14'>Sensors</text>
      <text x='150' y='86' text-anchor='middle' fill='#cfeffb' font-size='12'>Hyperspectral â€¢ Acoustic â€¢ GPS</text>
      <rect x='360' y='30' width='280' height='140' rx='12' fill='#022033' stroke='rgba(255,255,255,0.04)'/>
      <text x='500' y='62' text-anchor='middle' fill='#9fe9ff' font-weight='700' font-size='14'>Edge Compute</text>
      <text x='500' y='86' text-anchor='middle' fill='#cfeffb' font-size='12'>Jetson Nano â€¢ ML â€¢ Fusion</text>
      <rect x='710' y='30' width='280' height='140' rx='12' fill='#022033' stroke='rgba(255,255,255,0.04)'/>
      <text x='850' y='62' text-anchor='middle' fill='#9fe9ff' font-weight='700' font-size='14'>Cloud</text>
      <text x='850' y='86' text-anchor='middle' fill='#cfeffb' font-size='12'>Storage â€¢ Maps â€¢ APIs</text>
      <path d='M290 100 L360 100' stroke='url(#g)' stroke-width='4' stroke-linecap='round'/>
      <path d='M640 100 L710 100' stroke='url(#g)' stroke-width='4' stroke-linecap='round'/>
    </svg>`;
    downloadData(svg,'vortex_flowchart.svg','image/svg+xml');
  } else {
    svg = `<?xml version="1.0" encoding="UTF-8"?>
    <svg xmlns='http://www.w3.org/2000/svg' width='1000' height='600' viewBox='0 0 1000 600'>
      <rect x='20' y='20' rx='14' width='960' height='560' fill='#02121a' stroke='#163140' />
      <text x='500' y='60' fill='#9fe9ff' font-size='18' text-anchor='middle' font-weight='700'>PCB Wiring â€” HySpexBot (Schematic)</text>
      <line x1='100' y1='140' x2='300' y2='140' stroke='#9fe9ff' stroke-width='2' />
      <text x='100' y='130' fill='#cfeffb' font-size='12'>Battery (12.8V)</text>
      <rect x='320' y='110' rx='6' width='160' height='60' fill='#022033' stroke='#0f3a45'/>
      <text x='400' y='140' fill='#9fe9ff' font-size='12' text-anchor='middle'>Buck Converter (5V)</text>
      <path d='M220 140 L320 140' stroke='#39d6ff' stroke-width='2'/>
      <text x='520' y='180' fill='#cfeffb' font-size='12'>Jetson Nano (5V input)</text>
      <rect x='480' y='150' rx='6' width='220' height='100' fill='#022033' stroke='#0f3a45' />
      <text x='590' y='190' fill='#9fe9ff' font-size='12' text-anchor='middle'>Jetson Nano</text>
      <text x='590' y='210' fill='#cfeffb' font-size='11' text-anchor='middle'>USB: Spectrometer | LTE Modem</text>
      <line x1='590' y1='250' x2='590' y2='340' stroke='#39d6ff' stroke-width='2'/>
      <rect x='520' y='340' rx='6' width='140' height='60' fill='#022033' stroke='#0f3a45'/>
      <text x='590' y='375' fill='#cfeffb' font-size='12' text-anchor='middle'>MCU (ADC / PWM)</text>
    </svg>`;
    downloadData(svg,'vortex_pcb_wiring.svg','image/svg+xml');
  }
}
function downloadData(data,filename,mimetype){
  const blob = new Blob([data], {type:mimetype});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = filename; document.body.appendChild(a); a.click();
  setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); },1500);
}

/* -------------------------
   Download sample JSON dataset
   ------------------------- */
function downloadJSON(){
  const sample = {
    bands: Array.from({length:150}, (_,i)=>400 + (i*(600/149))),
    samples: [
      {id:1,label:'water',turbidity:2.1,chl:0.6, spectrum: Array.from({length:150}, ()=>Math.random()*0.05+0.1)},
      {id:2,label:'organic',turbidity:6.2,chl:18.7, spectrum: Array.from({length:150}, ()=>Math.random()*0.3+0.2)},
      {id:3,label:'PE',turbidity:1.6,chl:0.03, spectrum: Array.from({length:150}, ()=>Math.random()*0.2+0.4)}
    ]
  };
  const blob = new Blob([JSON.stringify(sample,null,2)],{type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'synthetic_sample.json'; document.body.appendChild(a); a.click();
  setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); },1500);
}

/* -------------------------
   Download all assets zip (lightweight bundle by creating blobs)
   ------------------------- */
function downloadAll(){
  // bundle a few small files as separate downloads (no zip)
  downloadData(`VORTEX AERO â€” Brief\n\nThis bundle contains sample assets for demonstration.`,'VORTEX_AERO_brief.txt','text/plain');
  // create small dockerfile snippet
  const docker = `# Jetson Dockerfile snippet\nFROM nvcr.io/nvidia/l4t-base\n# install deps...`;
  downloadData(docker,'Dockerfile_snippet.txt','text/plain');
  // flow + pcb
  downloadSVG('flow'); setTimeout(()=> downloadSVG('pcb'), 600);
  setTimeout(()=> downloadJSON(), 1200);
}

/* -------------------------
   Download brief button
   ------------------------- */
function downloadBrief(){
  const brief = `VORTEX AERO â€” Project Brief\n\nFloating HySpexBot: Edge-AI floating platform for chlorophyll & plastic detection. Contact team for full repo.`;
  downloadData(brief,'VORTEX_BRIEF.txt','text/plain');
}

/* -------------------------
   SNIPPET GENERATOR (AI-like)
   ------------------------- */
function makeSnippet(){
  const t = document.getElementById('snippetType').value;
  const out = document.getElementById('snippet');
  if(t==='alert'){
    const alerts = [
      '[ALERT] 2025-10-22T07:34Z | Location: 14.02,73.88 | Chlorophyll: 22 mg/m3 â€” rapid increase detected. Recommend sample collection.',
      '[ALERT] 2025-10-22T08:10Z | Location: 14.05,73.80 | Plastic cluster detected (PET) â€” density est. 0.18 items/m2.'
    ];
    out.textContent = alerts[Math.floor(Math.random()*alerts.length)];
  } else if(t==='patent'){
    out.textContent = `Patent phrasing:\n"A method for combined optical and acoustic detection comprising: acquiring spectral reflectance across the 400â€“1000 nm band; acquiring acoustic echo data; performing pre-processing; applying a turbidity-conditioned attention fusion network to output a chlorophyll concentration estimate and a polymer classification."`;
  } else if(t==='summary'){
    out.textContent = `Executive summary (short): VORTEX AERO is a portable floating system that detects algae and plastics in real-time using hyperspectral and acoustic fusion on edge AI. It provides maps, alerts and a scalable dataset service.`;
  } else {
    out.textContent = `Deployment checklist:\n- Verify JetPack + PyTorch wheel compatibility\n- Install Docker image on Jetson\n- Calibrate spectrometer with Spectralon target\n- Configure MQTT & cloud endpoints\n- Perform field validation with paired lab samples`;
  }
}

/* -------------------------
   INIT: set canvas size and start when boot finished
   ------------------------- */
(function init(){
  const resize = ()=>{ canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight; W = canvas.width; H = canvas.height; };
  window.addEventListener('resize', resize);
  resize();
  // if boot already hidden (rare), start immediately
  setTimeout(()=> {
    if(document.getElementById('boot').style.display==='none') { startVortex(); initParticles(); }
  }, 900);
})();
</script>

</body>
</html>
